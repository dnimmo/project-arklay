<!DOCTYPE html>
<html data-ng-app='projectArklay' 
      data-ng-cloak 
      xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:svg="http://www.w3.org/2000/svg">
  <head>
    <title>Project Arklay</title>
    <meta name='viewport' 
          content='width=device-width, initial-scale=1'/>
    <meta name='theme-color' 
          content='#323232'/>
    <meta name='description' 
          content='An old-school text adventure game that you can play in your browser'>
    <link rel='author' 
          href='https://plus.google.com/+DavidNimmo/posts'/>
    <link href='http://fonts.googleapis.com/css?family=PT+Serif' 
          rel='stylesheet' 
          type='text/css'>
    <link rel='stylesheet' 
          href='assets/style/main.css'/>    
  </head>
  <body data-ng-controller='MainCtrl' 
        style='background-color: {{settings.backgroundColour}}; color: {{settings.textColour}}'>
        
    <main data-ui-view>
    </main>
    <!-- Settings panel located in ../directive-templates/settings-panel.html -->
    <!--<settings-panel></settings-panel>-->
    <!-- Inventory start -->
    <div class='inventory-toggle' data-ng-click='toggleInventory()'  data-ng-show='inventory.length != 0' >
        <svg class='inventory-icon' alt='Inventory' style='background-color: {{settings.backgroundColour}}'>
            <use xlink:href='/assets/images/defs.svg#inventory'></use>
        </svg>
      <span class='inventory-count' data-ng-show="!inventoryOpen" style='color: {{settings.backgroundColour}}'>
        {{inventory.length}}
      </span>
    </div>
    <section class='inventory' data-ng-show='inventoryOpen' style='background-color: {{settings.menuColour}}; color: {{settings.menuTextColour}}'>
      <!--Put into separate partial-->
      <div class="inventory-contents">
        <ul data-ng-if='!itemOptionsOpen'>
          <li class="button inv" data-ng-repeat='item in inventory' data-ng-click='showOptions(item)'>
            <svg class='item'>
              <use xlink:href='{{item.image}}'></use>
            </svg>
            <p style='color: {{settings.menuTextColour}}'>{{item.name}}</p>
          </li>
        </ul>
        <p class="button" data-ng-if='!itemOptionsOpen' data-ng-click='toggleInventory()' style='color: {{settings.menuTextColour}}; border-color: {{settings.menuTextColour}}'>Close Inventory</p>
        <p style='color: {{settings.menuTextColour}}'>{{selectedItem.description}}</p>
        <ul class='itemOptions' data-ng-if='itemOptionsOpen'>
          <li class='button' data-ng-click='use("{{selectedItem}}")' style='color: {{settings.menuTextColour}}; border-color: {{settings.menuTextColour}}'>Use</li>
          <li class='button' data-ng-click='clearSelectedItem()' style='color: {{settings.menuTextColour}}; border-color: {{settings.menuTextColour}}'>Cancel</li>
        </ul>
        <p class="additional-info" style='color: {{settings.menuTextColour}}'>{{additionalMessage}}</p>
      </div>
    </section>
    <!-- Inventory end -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script src="http://angular-ui.github.io/ui-router/release/angular-ui-router.min.js"></script>
    <script src="assets/scripts/arklay.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-66173218-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
